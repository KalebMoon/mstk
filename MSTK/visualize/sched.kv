#:import Factory kivy.factory.Factory
#:import FigureCanvasKivyAgg kivy.garden.matplotlib.backend_kivyagg 
#:import BoxLayout kivy.uix.boxlayout
#:import Line kivy.graphics
#:import Button kivy.uix.button
        
RootLayout:
    orientation: 'vertical'
    show_dashboard: True
    Menu_bar:
        id: menu_bar
        size_hint_y: None
        height: '40dp'
        canvas.before:
            Color:
                rgba: 0, 1, 0, 0.3
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: 'Top menu bar'
        # DashboardSwitch:
        Button:
            text: 'Hide dashboard' if root.show_dashboard == True else 'Show dashboard'
            size_hint_x: None
            size: (200 ,menu_bar.size[1])
            on_press: root.show_dashboard = not(root.show_dashboard)


    MainArea:
        orientation: 'horizontal'
        size_hint: (1, 0.7)
        

        BoxLayout:
            orientation: 'vertical'
            id: plot
            size_hint: (0.7,1)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size            
            EmptyLayout:
                size_hint: (1, 0.03)
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 0.3
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: 'EMPTY'
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    size_hint: (0.85,1)          
                    BoxLayout:
                        MachineLayout:
                            size_hint: (0.15, 1)
                            canvas.before:
                                Color:
                                    rgba: 1, 0, 1, 0.3
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            
                        AxisLayout:
                            id: axis
                            size_hint: (0.75, 1)


                        EmptyLayout:
                            size_hint: (0.03, 1)
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 0.3
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            Label:
                                text: 'EMPTY'
            XtickLayout:
                size_hint: (1, 0.15)
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 0.3
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: 'X axis'
            

        LegendArea:
            # size_hint: (0.3,1)
            size_hint_x: None
            width: '200dp'
            canvas.before:
                Color:
                    rgba: 0.4, 0.4, 0.4, 0.7
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: 'Legend area'
        
    
    Dashboard:
        id: dashboard
        size_hint: (1,0.3) if root.show_dashboard == True else (1,0.001)
        height: 0
        canvas.before:
            Color:
                rgba: 0, 0, 1, 0.3
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: 'Dashboard area' if root.show_dashboard == True else ''
